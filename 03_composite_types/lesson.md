# ç¬¬03èŠ‚ï¼šå¤åˆæ•°æ®ç±»å‹

> **æœ¬èŠ‚ç›®æ ‡**ï¼šæŒæ¡æ•°ç»„ã€åˆ‡ç‰‡ã€Mapã€æŒ‡é’ˆçš„ä½¿ç”¨ï¼Œç†è§£å®ƒä»¬ä¸ Java é›†åˆçš„åŒºåˆ«  
> **å‰ç½®çŸ¥è¯†**ï¼šç¬¬01-02èŠ‚çš„å†…å®¹ï¼ˆä¸ä¼šç”¨åˆ°åç»­çŸ¥è¯†ç‚¹ï¼‰

---

## ğŸ“– ä¸€ã€æ•°ç»„ï¼ˆArrayï¼‰

### 1.1 æ•°ç»„çš„åŸºæœ¬æ¦‚å¿µ

#### **Java çš„æ•°ç»„**

```java
// Java æ•°ç»„æ˜¯å¼•ç”¨ç±»å‹
int[] numbers = new int[5];        // åˆ›å»ºé•¿åº¦ä¸º5çš„æ•°ç»„
numbers[0] = 10;

String[] names = {"å¼ ä¸‰", "æå››"};  // å­—é¢é‡åˆå§‹åŒ–

// æ•°ç»„æ˜¯å¼•ç”¨ç±»å‹ï¼Œèµ‹å€¼ä¼ é€’å¼•ç”¨
int[] arr1 = {1, 2, 3};
int[] arr2 = arr1;  // arr2 å’Œ arr1 æŒ‡å‘åŒä¸€æ•°ç»„
arr2[0] = 999;      // arr1[0] ä¹Ÿå˜æˆ 999
```

#### **Go çš„æ•°ç»„**

**å…³é”®ç‰¹æ€§**ï¼š

1. **æ•°ç»„æ˜¯å€¼ç±»å‹**ï¼ˆä¸æ˜¯å¼•ç”¨ï¼ï¼‰
2. **é•¿åº¦æ˜¯ç±»å‹çš„ä¸€éƒ¨åˆ†**ï¼š`[3]int` å’Œ `[5]int` æ˜¯ä¸åŒç±»å‹
3. **å›ºå®šé•¿åº¦**ï¼šå£°æ˜åä¸èƒ½æ”¹å˜å¤§å°

```go
// å£°æ˜æ•°ç»„
var numbers [5]int  // é»˜è®¤é›¶å€¼ï¼š[0 0 0 0 0]

// åˆå§‹åŒ–
arr1 := [3]int{1, 2, 3}           // å®Œæ•´åˆå§‹åŒ–
arr2 := [5]int{1, 2}              // éƒ¨åˆ†åˆå§‹åŒ–ï¼Œå…¶ä½™ä¸ºé›¶å€¼ï¼š[1 2 0 0 0]
arr3 := [...]int{1, 2, 3, 4}      // è‡ªåŠ¨æ¨æ–­é•¿åº¦

// å€¼ç±»å‹ï¼šèµ‹å€¼ä¼šæ‹·è´æ•´ä¸ªæ•°ç»„
var a = [3]int{1, 2, 3}
var b = a       // b æ˜¯ a çš„å‰¯æœ¬
b[0] = 999      // a[0] ä»ç„¶æ˜¯ 1ï¼ˆä¸å½±å“åŸæ•°ç»„ï¼‰
```

#### **æ•°ç»„çš„å¯¹æ¯”**

| ç‰¹æ€§     | Go æ•°ç»„              | Java æ•°ç»„        |
| -------- | -------------------- | ---------------- |
| **ç±»å‹** | å€¼ç±»å‹               | å¼•ç”¨ç±»å‹         |
| **é•¿åº¦** | ç±»å‹çš„ä¸€éƒ¨åˆ†         | ä¸æ˜¯ç±»å‹çš„ä¸€éƒ¨åˆ† |
| **èµ‹å€¼** | æ‹·è´æ•´ä¸ªæ•°ç»„         | æ‹·è´å¼•ç”¨         |
| **ä¼ å‚** | æ‹·è´æ•´ä¸ªæ•°ç»„ï¼ˆä½æ•ˆï¼‰ | ä¼ é€’å¼•ç”¨ï¼ˆé«˜æ•ˆï¼‰ |
| **ä¿®æ”¹** | ä¿®æ”¹å‰¯æœ¬ä¸å½±å“åŸæ•°ç»„ | ä¿®æ”¹ä¼šå½±å“åŸæ•°ç»„ |

---

### 1.2 æ•°ç»„çš„éå†

```go
arr := [5]int{10, 20, 30, 40, 50}

// æ–¹å¼1ï¼šä¼ ç»Ÿ for å¾ªç¯
for i := 0; i < len(arr); i++ {
    fmt.Println(arr[i])
}

// æ–¹å¼2ï¼šrange éå†ï¼ˆæ¨èï¼‰
for index, value := range arr {
    fmt.Printf("ç´¢å¼•:%d, å€¼:%d\n", index, value)
}

// åªè¦å€¼ï¼Œä¸è¦ç´¢å¼•
for _, value := range arr {
    fmt.Println(value)
}

// åªè¦ç´¢å¼•ï¼Œä¸è¦å€¼
for index := range arr {
    fmt.Println(index)
}
```

---

### 1.3 æ•°ç»„çš„é™åˆ¶ï¼ˆä¸ºä»€ä¹ˆéœ€è¦åˆ‡ç‰‡ï¼‰

```go
func printArray(arr [3]int) {  // åªèƒ½æ¥æ”¶ [3]int ç±»å‹
    fmt.Println(arr)
}

arr1 := [3]int{1, 2, 3}
arr2 := [5]int{1, 2, 3, 4, 5}

printArray(arr1)   // âœ… å¯ä»¥
// printArray(arr2)  // âŒ ç¼–è¯‘é”™è¯¯ï¼šç±»å‹ä¸åŒ¹é…

// é—®é¢˜ï¼šæ•°ç»„é•¿åº¦å›ºå®šï¼Œä¸çµæ´»
// è§£å†³æ–¹æ¡ˆï¼šåˆ‡ç‰‡ï¼ˆSliceï¼‰
```

---

## ğŸ“– äºŒã€åˆ‡ç‰‡ï¼ˆSliceï¼‰- Go çš„æ ¸å¿ƒæ•°æ®ç»“æ„

### 2.1 åˆ‡ç‰‡çš„åŸºæœ¬æ¦‚å¿µ

**åˆ‡ç‰‡æ˜¯ä»€ä¹ˆï¼Ÿ**

- åˆ‡ç‰‡æ˜¯å¯¹åº•å±‚æ•°ç»„çš„**å¼•ç”¨**ï¼ˆç±»ä¼¼ Java çš„ ArrayListï¼‰
- é•¿åº¦å¯å˜ã€å¯åŠ¨æ€æ‰©å®¹
- Go ä¸­ **99% æƒ…å†µç”¨åˆ‡ç‰‡ï¼Œè€Œä¸æ˜¯æ•°ç»„**

#### **Java çš„ ArrayList vs Go çš„ Slice**

```java
// Java ArrayList
List<Integer> list = new ArrayList<>();
list.add(10);           // æ·»åŠ å…ƒç´ 
list.add(20);
int size = list.size(); // è·å–é•¿åº¦
int val = list.get(0);  // è·å–å…ƒç´ 
```

```go
// Go Sliceï¼ˆæ›´ç®€æ´ï¼‰
var slice []int           // å£°æ˜åˆ‡ç‰‡ï¼ˆæ³¨æ„ï¼šæ²¡æœ‰é•¿åº¦ï¼‰
slice = append(slice, 10) // æ·»åŠ å…ƒç´ 
slice = append(slice, 20)
length := len(slice)      // è·å–é•¿åº¦
val := slice[0]           // è·å–å…ƒç´ ï¼ˆç›´æ¥ç”¨ç´¢å¼•ï¼‰
```

---

### 2.2 åˆ‡ç‰‡çš„åˆ›å»ºæ–¹å¼

#### **æ–¹å¼1ï¼šå­—é¢é‡ï¼ˆæœ€å¸¸ç”¨ï¼‰**

```go
slice1 := []int{1, 2, 3, 4, 5}        // ç›´æ¥åˆå§‹åŒ–
slice2 := []string{"Go", "Java", "Python"}
```

#### **æ–¹å¼2ï¼šmake å‡½æ•°ï¼ˆé¢„åˆ†é…å®¹é‡ï¼‰**

```go
// make([]T, length, capacity)
slice := make([]int, 5)      // é•¿åº¦5ï¼Œå®¹é‡5ï¼Œåˆå§‹å€¼å…¨æ˜¯0ï¼š[0 0 0 0 0]
slice := make([]int, 3, 10)  // é•¿åº¦3ï¼Œå®¹é‡10ï¼š[0 0 0]

// ç±»æ¯” Java
// List<Integer> list = new ArrayList<>(10);  // é¢„åˆ†é…å®¹é‡
```

#### **æ–¹å¼3ï¼šä»æ•°ç»„åˆ‡ç‰‡**

```go
arr := [5]int{1, 2, 3, 4, 5}
slice := arr[1:4]  // ä»ç´¢å¼•1åˆ°3ï¼ˆä¸åŒ…æ‹¬4ï¼‰ï¼š[2 3 4]
```

---

### 2.3 åˆ‡ç‰‡çš„é•¿åº¦ä¸å®¹é‡

**é‡è¦æ¦‚å¿µ**ï¼š

- **é•¿åº¦ï¼ˆlengthï¼‰**ï¼šåˆ‡ç‰‡ä¸­å…ƒç´ çš„ä¸ªæ•°ï¼Œ`len(slice)`
- **å®¹é‡ï¼ˆcapacityï¼‰**ï¼šåº•å±‚æ•°ç»„ä»åˆ‡ç‰‡èµ·å§‹ä½ç½®åˆ°æœ«å°¾çš„é•¿åº¦ï¼Œ`cap(slice)`

```go
slice := make([]int, 3, 5)
// é•¿åº¦ï¼š3ï¼ˆå¯è®¿é—®çš„å…ƒç´ ï¼‰
// å®¹é‡ï¼š5ï¼ˆåº•å±‚æ•°ç»„çš„å¤§å°ï¼‰

fmt.Println(len(slice))  // 3
fmt.Println(cap(slice))  // 5

// æ·»åŠ å…ƒç´ ï¼ˆé•¿åº¦å¢é•¿ï¼Œå®¹é‡ä¸å˜ï¼‰
slice = append(slice, 10)
fmt.Println(len(slice))  // 4
fmt.Println(cap(slice))  // 5

// ç»§ç»­æ·»åŠ 
slice = append(slice, 20, 30)
fmt.Println(len(slice))  // 6ï¼ˆè¶…è¿‡åŸå®¹é‡ï¼‰
fmt.Println(cap(slice))  // 10ï¼ˆè‡ªåŠ¨æ‰©å®¹ï¼Œå®¹é‡ç¿»å€ï¼‰
```

**Java å¯¹æ¯”**ï¼š

```java
ArrayList<Integer> list = new ArrayList<>(5);  // åˆå§‹å®¹é‡5
// Java ä¹Ÿä¼šè‡ªåŠ¨æ‰©å®¹ï¼Œä½†ä¸èƒ½ç›´æ¥æŸ¥çœ‹å®¹é‡
```

---

### 2.4 append æ·»åŠ å…ƒç´ 

```go
var slice []int                      // nil åˆ‡ç‰‡
slice = append(slice, 1)             // [1]
slice = append(slice, 2, 3, 4)       // [1 2 3 4]

// åˆå¹¶åˆ‡ç‰‡
slice1 := []int{1, 2}
slice2 := []int{3, 4, 5}
slice1 = append(slice1, slice2...)   // ... å±•å¼€åˆ‡ç‰‡ï¼š[1 2 3 4 5]

// ç±»æ¯” Java
// list.add(1);
// list.addAll(otherList);
```

**é‡è¦**ï¼š`append` å¯èƒ½ä¼šè¿”å›æ–°çš„åˆ‡ç‰‡ï¼ˆæ‰©å®¹æ—¶ï¼‰ï¼Œæ‰€ä»¥å¿…é¡»æ¥æ”¶è¿”å›å€¼ï¼š

```go
slice = append(slice, 10)  // âœ… æ­£ç¡®
append(slice, 10)          // âŒ é”™è¯¯ï¼šè¿”å›å€¼è¢«ä¸¢å¼ƒ
```

---

### 2.5 åˆ‡ç‰‡æ“ä½œ

#### **åˆ‡ç‰‡æˆªå–**

```go
slice := []int{0, 1, 2, 3, 4, 5}

slice[1:4]   // [1 2 3]ï¼ˆç´¢å¼•1åˆ°3ï¼‰
slice[:3]    // [0 1 2]ï¼ˆä»å¼€å¤´åˆ°2ï¼‰
slice[2:]    // [2 3 4 5]ï¼ˆä»2åˆ°ç»“å°¾ï¼‰
slice[:]     // [0 1 2 3 4 5]ï¼ˆå®Œæ•´åˆ‡ç‰‡ï¼‰

// ç±»æ¯” Java
// list.subList(1, 4);  // å­åˆ—è¡¨
```

#### **å¤åˆ¶åˆ‡ç‰‡**

```go
src := []int{1, 2, 3, 4, 5}

// æ–¹å¼1ï¼šcopy å‡½æ•°
dst := make([]int, len(src))
copy(dst, src)  // å¤åˆ¶ src åˆ° dst

// æ–¹å¼2ï¼šappendï¼ˆå¤åˆ¶å¹¶åˆå¹¶ï¼‰
dst := append([]int{}, src...)  // åˆ›å»ºæ–°åˆ‡ç‰‡å¹¶å¤åˆ¶

// Java å¯¹æ¯”
// List<Integer> dst = new ArrayList<>(src);  // å¤åˆ¶
```

---

### 2.6 åˆ‡ç‰‡çš„é™·é˜±ï¼ˆé‡è¦ï¼ï¼‰

#### **é™·é˜±1ï¼šåˆ‡ç‰‡å…±äº«åº•å±‚æ•°ç»„**

```go
arr := [5]int{1, 2, 3, 4, 5}
slice1 := arr[1:4]  // [2 3 4]
slice2 := arr[2:5]  // [3 4 5]

slice1[1] = 999     // ä¿®æ”¹ slice1
fmt.Println(slice2) // [999 4 5]ï¼ˆslice2 ä¹Ÿå—å½±å“ï¼ï¼‰
fmt.Println(arr)    // [1 2 999 4 5]ï¼ˆåŸæ•°ç»„ä¹Ÿå˜äº†ï¼ï¼‰
```

**åŸå› **ï¼šåˆ‡ç‰‡åªæ˜¯å¯¹æ•°ç»„çš„å¼•ç”¨ï¼Œä¿®æ”¹åˆ‡ç‰‡ä¼šå½±å“åº•å±‚æ•°ç»„ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨ `copy` åˆ›å»ºç‹¬ç«‹å‰¯æœ¬ï¼š

```go
slice1 := []int{1, 2, 3}
slice2 := make([]int, len(slice1))
copy(slice2, slice1)  // slice2 æ˜¯ç‹¬ç«‹å‰¯æœ¬
```

#### **é™·é˜±2ï¼šappend ååŸåˆ‡ç‰‡å¯èƒ½å¤±æ•ˆ**

```go
slice1 := []int{1, 2, 3}
slice2 := slice1          // slice2 æŒ‡å‘åŒä¸€åº•å±‚æ•°ç»„

slice1 = append(slice1, 4, 5, 6, 7, 8)  // æ‰©å®¹ï¼Œåˆ†é…æ–°æ•°ç»„
slice1[0] = 999

fmt.Println(slice1)  // [999 2 3 4 5 6 7 8]
fmt.Println(slice2)  // [1 2 3]ï¼ˆä¸å—å½±å“ï¼Œå› ä¸ºslice1å·²æŒ‡å‘æ–°æ•°ç»„ï¼‰
```

---

## ğŸ“– ä¸‰ã€Mapï¼ˆæ˜ å°„ï¼‰

### 3.1 Map çš„åŸºæœ¬æ¦‚å¿µ

#### **Java çš„ HashMap vs Go çš„ Map**

```java
// Java HashMap
Map<String, Integer> map = new HashMap<>();
map.put("å¼ ä¸‰", 25);
map.put("æå››", 30);
int age = map.get("å¼ ä¸‰");          // 25
boolean exists = map.containsKey("ç‹äº”");
```

```go
// Go Map
var m map[string]int  // å£°æ˜ï¼ˆnil mapï¼Œä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼‰

m = make(map[string]int)  // åˆå§‹åŒ–
m["å¼ ä¸‰"] = 25
m["æå››"] = 30
age := m["å¼ ä¸‰"]  // 25

// æ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨
age, exists := m["ç‹äº”"]  // age=0, exists=false
```

---

### 3.2 Map çš„åˆ›å»ºæ–¹å¼

#### **æ–¹å¼1ï¼šmake å‡½æ•°**

```go
m := make(map[string]int)        // åˆ›å»ºç©º map
m := make(map[string]int, 10)    // é¢„åˆ†é…å®¹é‡ï¼ˆä¼˜åŒ–æ€§èƒ½ï¼‰
```

#### **æ–¹å¼2ï¼šå­—é¢é‡**

```go
m := map[string]int{
    "å¼ ä¸‰": 25,
    "æå››": 30,
    "ç‹äº”": 35,  // æœ€åä¸€ä¸ªé€—å·ä¸èƒ½çœç•¥ï¼ˆGo é£æ ¼ï¼‰
}
```

---

### 3.3 Map çš„æ“ä½œ

#### **æ·»åŠ /ä¿®æ”¹å…ƒç´ **

```go
m := make(map[string]int)
m["å¼ ä¸‰"] = 25     // æ·»åŠ 
m["å¼ ä¸‰"] = 26     // ä¿®æ”¹ï¼ˆkey å·²å­˜åœ¨ï¼‰
```

#### **è·å–å…ƒç´ **

```go
age := m["å¼ ä¸‰"]  // å¦‚æœä¸å­˜åœ¨ï¼Œè¿”å›é›¶å€¼ 0

// æ¨èï¼šæ£€æŸ¥é”®æ˜¯å¦å­˜åœ¨
age, exists := m["å¼ ä¸‰"]
if exists {
    fmt.Println("å¹´é¾„:", age)
} else {
    fmt.Println("ä¸å­˜åœ¨")
}
```

#### **åˆ é™¤å…ƒç´ **

```go
delete(m, "å¼ ä¸‰")  // åˆ é™¤é”®å€¼å¯¹
delete(m, "ä¸å­˜åœ¨çš„key")  // ä¸ä¼šæŠ¥é”™ï¼ˆå®‰å…¨ï¼‰

// Java å¯¹æ¯”
// map.remove("å¼ ä¸‰");
```

#### **éå† Map**

```go
m := map[string]int{"å¼ ä¸‰": 25, "æå››": 30}

// éå†é”®å€¼å¯¹
for key, value := range m {
    fmt.Printf("%s: %d\n", key, value)
}

// åªéå†é”®
for key := range m {
    fmt.Println(key)
}

// åªéå†å€¼
for _, value := range m {
    fmt.Println(value)
}
```

**æ³¨æ„**ï¼šMap çš„éå†é¡ºåºæ˜¯**éšæœºçš„**ï¼ˆJava çš„ HashMap ä¹Ÿæ˜¯ï¼‰

---

### 3.4 Map çš„æ³¨æ„äº‹é¡¹

#### **1. nil map ä¸èƒ½ç›´æ¥ä½¿ç”¨**

```go
var m map[string]int  // nil map
// m["å¼ ä¸‰"] = 25      // âŒ panic: assignment to entry in nil map

m = make(map[string]int)  // âœ… å¿…é¡»å…ˆåˆå§‹åŒ–
m["å¼ ä¸‰"] = 25
```

#### **2. Map æ˜¯å¼•ç”¨ç±»å‹**

```go
m1 := map[string]int{"a": 1}
m2 := m1  // m2 å’Œ m1 æŒ‡å‘åŒä¸€ map

m2["b"] = 2
fmt.Println(m1)  // map[a:1 b:2]ï¼ˆm1 ä¹Ÿæ”¹å˜äº†ï¼‰
```

#### **3. Map ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„**

```go
// å¤šä¸ª goroutine åŒæ—¶è¯»å†™ map ä¼š panic
// è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ sync.Map æˆ–åŠ é”ï¼ˆç¬¬06èŠ‚ä¼šè®²ï¼‰
```

---

## ğŸ“– å››ã€æŒ‡é’ˆï¼ˆPointerï¼‰

### 4.1 æŒ‡é’ˆçš„åŸºæœ¬æ¦‚å¿µ

#### **Java çš„å¼•ç”¨ vs Go çš„æŒ‡é’ˆ**

**Java**ï¼š

- æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯å¼•ç”¨ç±»å‹ï¼ˆéšå¼ï¼‰
- æ²¡æœ‰æ˜¾å¼æŒ‡é’ˆæ“ä½œ
- ä¸èƒ½è·å–å¯¹è±¡çš„å†…å­˜åœ°å€

```java
Person p1 = new Person("å¼ ä¸‰");
Person p2 = p1;  // p2 å’Œ p1 æŒ‡å‘åŒä¸€å¯¹è±¡
p2.name = "æå››";
System.out.println(p1.name);  // "æå››"ï¼ˆä¿®æ”¹äº†åŒä¸€å¯¹è±¡ï¼‰
```

**Go**ï¼š

- æ˜¾å¼æŒ‡é’ˆï¼ˆå¯è§ã€å¯æ§ï¼‰
- å¯ä»¥è·å–ä»»ä½•å˜é‡çš„åœ°å€
- æŒ‡é’ˆè¿ç®—å—é™ï¼ˆå®‰å…¨ï¼‰

```go
type Person struct {
    Name string
}

p1 := Person{Name: "å¼ ä¸‰"}
p2 := p1        // å€¼æ‹·è´ï¼Œp2 æ˜¯ç‹¬ç«‹å‰¯æœ¬
p2.Name = "æå››"
fmt.Println(p1.Name)  // "å¼ ä¸‰"ï¼ˆä¸å½±å“ p1ï¼‰

// ä½¿ç”¨æŒ‡é’ˆ
var ptr *Person = &p1  // ptr æŒ‡å‘ p1 çš„åœ°å€
ptr.Name = "ç‹äº”"
fmt.Println(p1.Name)   // "ç‹äº”"ï¼ˆé€šè¿‡æŒ‡é’ˆä¿®æ”¹äº† p1ï¼‰
```

---

### 4.2 æŒ‡é’ˆçš„åŸºæœ¬æ“ä½œ

#### **å–åœ°å€ï¼ˆ&ï¼‰å’Œè§£å¼•ç”¨ï¼ˆ\*ï¼‰**

```go
// åŸºæœ¬ç±»å‹
x := 10
ptr := &x        // å–åœ°å€ï¼šptr æ˜¯ *int ç±»å‹
fmt.Println(ptr)  // è¾“å‡ºåœ°å€ï¼š0xc0000b4010

*ptr = 20        // è§£å¼•ç”¨ï¼šä¿®æ”¹ ptr æŒ‡å‘çš„å€¼
fmt.Println(x)   // 20ï¼ˆx è¢«ä¿®æ”¹äº†ï¼‰

// ç»“æ„ä½“
type Person struct {
    Name string
    Age  int
}

p := Person{Name: "å¼ ä¸‰", Age: 25}
ptr := &p           // å–åœ°å€
ptr.Age = 30        // Go è‡ªåŠ¨è§£å¼•ç”¨ï¼ˆè¯­æ³•ç³–ï¼‰
// (*ptr).Age = 30  // ç­‰ä»·å†™æ³•

fmt.Println(p.Age)  // 30
```

---

### 4.3 æŒ‡é’ˆçš„ä½¿ç”¨åœºæ™¯

#### **åœºæ™¯1ï¼šé¿å…å¤§ç»“æ„ä½“æ‹·è´**

```go
type LargeStruct struct {
    Data [1000000]int  // å¾ˆå¤§çš„æ•°ç»„
}

// âŒ å€¼ä¼ é€’ï¼šæ‹·è´æ•´ä¸ªç»“æ„ä½“ï¼ˆä½æ•ˆï¼‰
func processByValue(s LargeStruct) {
    // ...
}

// âœ… æŒ‡é’ˆä¼ é€’ï¼šåªæ‹·è´æŒ‡é’ˆï¼ˆ8å­—èŠ‚ï¼Œé«˜æ•ˆï¼‰
func processByPointer(s *LargeStruct) {
    // ...
}
```

#### **åœºæ™¯2ï¼šå‡½æ•°éœ€è¦ä¿®æ”¹å‚æ•°**

```go
type Counter struct {
    Count int
}

// å€¼æ¥æ”¶è€…ï¼šä¸èƒ½ä¿®æ”¹åŸå¯¹è±¡
func (c Counter) Increment() {
    c.Count++  // åªä¿®æ”¹å‰¯æœ¬
}

// æŒ‡é’ˆæ¥æ”¶è€…ï¼šå¯ä»¥ä¿®æ”¹åŸå¯¹è±¡
func (c *Counter) IncrementPtr() {
    c.Count++  // ä¿®æ”¹åŸå¯¹è±¡
}

func main() {
    counter := Counter{Count: 0}

    counter.Increment()     // Count ä»ç„¶æ˜¯ 0
    counter.IncrementPtr()  // Count å˜æˆ 1
}
```

#### **åœºæ™¯3ï¼šè¿”å›å‡½æ•°å†…åˆ›å»ºçš„å¯¹è±¡**

```go
// âœ… è¿”å›æŒ‡é’ˆï¼ˆå¸¸è§ï¼‰
func createPerson() *Person {
    p := Person{Name: "å¼ ä¸‰"}
    return &p  // è¿”å›å±€éƒ¨å˜é‡åœ°å€ï¼ˆGo è‡ªåŠ¨é€ƒé€¸åˆ°å †ï¼‰
}

// Java å¯¹æ¯”
// public Person createPerson() {
//     Person p = new Person("å¼ ä¸‰");
//     return p;  // è¿”å›å¼•ç”¨
// }
```

---

### 4.4 æŒ‡é’ˆçš„æ³¨æ„äº‹é¡¹

#### **1. nil æŒ‡é’ˆ**

```go
var ptr *int     // nil æŒ‡é’ˆ
// *ptr = 10     // âŒ panic: nil pointer dereference

ptr = new(int)   // åˆ†é…å†…å­˜
*ptr = 10        // âœ… å¯ä»¥ä½¿ç”¨
```

#### **2. Go æ²¡æœ‰æŒ‡é’ˆè¿ç®—**

```go
arr := [3]int{1, 2, 3}
ptr := &arr[0]

// ptr++  // âŒ ç¼–è¯‘é”™è¯¯ï¼šGo ä¸æ”¯æŒæŒ‡é’ˆè¿ç®—ï¼ˆå®‰å…¨è€ƒè™‘ï¼‰
```

#### **3. new å‡½æ•°**

```go
// new(T) è¿”å› *T ç±»å‹çš„æŒ‡é’ˆï¼ŒæŒ‡å‘é›¶å€¼
ptr := new(int)       // ptr æ˜¯ *intï¼ŒæŒ‡å‘ 0
*ptr = 100

// ç­‰ä»·äº
var x int
ptr := &x

// ç»“æ„ä½“
p := new(Person)  // p æ˜¯ *Personï¼Œå­—æ®µéƒ½æ˜¯é›¶å€¼
p.Name = "å¼ ä¸‰"
```

---

### 4.5 å€¼ä¼ é€’ vs æŒ‡é’ˆä¼ é€’æ€»ç»“

| ä¼ é€’æ–¹å¼     | æ‹·è´å†…å®¹      | èƒ½å¦ä¿®æ”¹åŸå¯¹è±¡ | æ€§èƒ½         | ä½¿ç”¨åœºæ™¯           |
| ------------ | ------------- | -------------- | ------------ | ------------------ |
| **å€¼ä¼ é€’**   | æ•´ä¸ªå¯¹è±¡      | âŒ ä¸èƒ½        | ä½ï¼ˆå¤§å¯¹è±¡ï¼‰ | å°å¯¹è±¡ã€ä¸éœ€è¦ä¿®æ”¹ |
| **æŒ‡é’ˆä¼ é€’** | æŒ‡é’ˆï¼ˆ8å­—èŠ‚ï¼‰ | âœ… å¯ä»¥        | é«˜           | å¤§å¯¹è±¡ã€éœ€è¦ä¿®æ”¹   |

```go
// å€¼ä¼ é€’
func modifyValue(p Person) {
    p.Name = "æå››"  // ä¿®æ”¹å‰¯æœ¬
}

// æŒ‡é’ˆä¼ é€’
func modifyPointer(p *Person) {
    p.Name = "æå››"  // ä¿®æ”¹åŸå¯¹è±¡
}

func main() {
    person := Person{Name: "å¼ ä¸‰"}

    modifyValue(person)
    fmt.Println(person.Name)  // "å¼ ä¸‰"ï¼ˆæœªæ”¹å˜ï¼‰

    modifyPointer(&person)
    fmt.Println(person.Name)  // "æå››"ï¼ˆå·²æ”¹å˜ï¼‰
}
```

---

## ğŸ’» äºŒã€ä»£ç ç¤ºä¾‹

å®Œæ•´ç¤ºä¾‹ä»£ç è¯·æŸ¥çœ‹ `example.go`

---

## ğŸ¯ ä¸‰ã€éšå ‚ç»ƒä¹ 

### ç»ƒä¹ è¦æ±‚ï¼šå®ç°ä¸€ä¸ª"å­¦ç”Ÿæˆç»©ç®¡ç†å™¨"

#### **åŠŸèƒ½éœ€æ±‚**ï¼š

1. **ä½¿ç”¨åˆ‡ç‰‡**å­˜å‚¨å­¦ç”Ÿåˆ—è¡¨
2. **ä½¿ç”¨ Map**å­˜å‚¨å­¦ç”ŸIDåˆ°æˆç»©çš„æ˜ å°„
3. **ä½¿ç”¨æŒ‡é’ˆ**é¿å…å¤§ç»“æ„ä½“æ‹·è´

#### **å…·ä½“ä»»åŠ¡**ï¼š

**å®šä¹‰ç»“æ„ä½“**ï¼š

```go
type Student struct {
    ID    int
    Name  string
    Age   int
    Class string
}

type ScoreManager struct {
    Students []Student        // åˆ‡ç‰‡ï¼šå­¦ç”Ÿåˆ—è¡¨
    Scores   map[int]float64  // Mapï¼šå­¦å· -> åˆ†æ•°
}
```

**å®ç°æ–¹æ³•**ï¼ˆæŒ‡é’ˆæ¥æ”¶è€…ï¼‰ï¼š

1. `AddStudent(student Student)` - æ·»åŠ å­¦ç”Ÿåˆ°åˆ‡ç‰‡
2. `SetScore(studentID int, score float64) error` - è®¾ç½®æˆç»©ï¼ˆæ£€æŸ¥å­¦ç”Ÿæ˜¯å¦å­˜åœ¨ï¼‰
3. `GetScore(studentID int) (float64, error)` - è·å–æˆç»©
4. `GetAverageScore() float64` - è®¡ç®—å¹³å‡åˆ†
5. `GetTopStudents(n int) []Student` - è¿”å›å‰ N åå­¦ç”Ÿï¼ˆæŒ‰åˆ†æ•°é™åºï¼‰

**å®ç°å‡½æ•°**ï¼š

1. `FindStudentByID(students []Student, id int) (*Student, error)` - æ ¹æ®IDæŸ¥æ‰¾å­¦ç”Ÿï¼ˆè¿”å›æŒ‡é’ˆï¼‰
2. `CopyStudents(src []Student) []Student` - å¤åˆ¶å­¦ç”Ÿåˆ‡ç‰‡ï¼ˆæ·±æ‹·è´ï¼‰

---

### æœŸæœ›è¾“å‡ºç¤ºä¾‹

```
===== æ·»åŠ å­¦ç”Ÿ =====
âœ“ æ·»åŠ å­¦ç”Ÿ: å¼ ä¸‰ (ID: 1001)
âœ“ æ·»åŠ å­¦ç”Ÿ: æå›› (ID: 1002)
âœ“ æ·»åŠ å­¦ç”Ÿ: ç‹äº” (ID: 1003)

===== è®¾ç½®æˆç»© =====
âœ“ å¼ ä¸‰çš„æˆç»©: 95.50
âœ“ æå››çš„æˆç»©: 88.00
âœ“ ç‹äº”çš„æˆç»©: 92.50

===== æŸ¥è¯¢æˆç»© =====
å­¦ç”Ÿ 1001 çš„æˆç»©: 95.50
å­¦ç”Ÿ 9999 çš„æˆç»©: å­¦ç”Ÿä¸å­˜åœ¨

===== ç»Ÿè®¡ä¿¡æ¯ =====
ç­çº§å¹³å‡åˆ†: 92.00

===== Top 2 å­¦ç”Ÿ =====
1. å¼ ä¸‰ - 95.50åˆ†
2. ç‹äº” - 92.50åˆ†

===== æµ‹è¯•åˆ‡ç‰‡æ‹·è´ =====
åŸåˆ‡ç‰‡: [å¼ ä¸‰ æå›› ç‹äº”]
å¤åˆ¶åä¿®æ”¹ä¸å½±å“åŸåˆ‡ç‰‡: [å¼ ä¸‰ æå›› ç‹äº”]
```

---

## ğŸ“ æäº¤æ–¹å¼

å®Œæˆåï¼Œå°†ä»£ç ä¿å­˜ä¸º `e:\Golang_study\03_composite_types\exercise.go`

---

## ğŸ”‘ å…³é”®çŸ¥è¯†ç‚¹æ€»ç»“

| ç±»å‹     | Go ç‰¹ç‚¹            | vs Java   | ä½¿ç”¨å»ºè®®           |
| -------- | ------------------ | --------- | ------------------ |
| **æ•°ç»„** | å€¼ç±»å‹ã€å›ºå®šé•¿åº¦   | å¼•ç”¨ç±»å‹  | å¾ˆå°‘ç”¨ï¼Œç”¨åˆ‡ç‰‡ä»£æ›¿ |
| **åˆ‡ç‰‡** | å¼•ç”¨ç±»å‹ã€åŠ¨æ€é•¿åº¦ | ArrayList | æœ€å¸¸ç”¨çš„é›†åˆ       |
| **Map**  | å¼•ç”¨ç±»å‹ã€æ— åº     | HashMap   | é”®å€¼å¯¹å­˜å‚¨         |
| **æŒ‡é’ˆ** | æ˜¾å¼ã€å¯æ§         | éšå¼å¼•ç”¨  | å¤§å¯¹è±¡ã€éœ€ä¿®æ”¹æ—¶ç”¨ |

**ä¸‹ä¸€èŠ‚é¢„å‘Š**ï¼šé¢å‘å¯¹è±¡åœ¨ Go ä¸­çš„å®ç°ï¼ˆæ¥å£ã€ç»„åˆã€å¤šæ€ï¼‰ï¼
